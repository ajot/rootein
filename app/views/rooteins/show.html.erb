<div class="max-w-4xl mx-auto mt-10 flex gap-8">
  <!-- Sidebar: rootein list -->
  <div class="w-64 shrink-0">
    <h2 class="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3">My Rooteins</h2>
    <ul class="space-y-2">
      <% @rooteins.each do |rootein| %>
        <li>
          <%= link_to rootein_path(rootein),
              class: "block p-3 rounded-lg #{rootein == @rootein ? 'bg-green-50 border border-green-200' : 'hover:bg-gray-50'}" do %>
            <span class="font-medium <%= rootein == @rootein ? 'text-green-700' : 'text-gray-800' %>"><%= rootein.name %></span>
            <span class="text-xs ml-1 <%= rootein.current_streak > 0 ? 'text-green-600 bg-green-100' : 'text-gray-500 bg-gray-100' %> px-2 py-0.5 rounded-full font-bold"><%= rootein.current_streak %> days</span>
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>

  <!-- Main: calendar -->
  <div class="flex-1 max-w-md">
    <h1 class="text-2xl font-bold mb-2"><%= @rootein.name %></h1>
    <p class="text-gray-600 mb-1">Current streak: <span class="font-bold text-green-600"><%= @rootein.current_streak %> days</span></p>
    <p class="text-sm italic text-gray-400 mb-4">
      <% if @rootein.current_streak == 0 %>
        Don't break the chain — start today!
      <% elsif @rootein.current_streak < 7 %>
        Good start! Keep the momentum going.
      <% elsif @rootein.current_streak < 21 %>
        You're building a real habit. Stay consistent!
      <% else %>
        This is a rootein now. You own it!
      <% end %>
    </p>

    <!-- Month navigation -->
    <div class="flex items-center justify-between mb-4">
      <%= link_to "← Prev", rootein_path(@rootein, date: @date.prev_month),
          class: "text-blue-600 hover:underline" %>
      <span class="font-semibold text-lg"><%= @date.strftime("%B %Y") %></span>
      <%= link_to "Next →", rootein_path(@rootein, date: @date.next_month),
          class: "text-blue-600 hover:underline" %>
    </div>

    <!-- Day-of-week headers -->
    <div class="grid grid-cols-7 text-center text-sm font-medium text-gray-500 mb-1">
      <% %w[Sun Mon Tue Wed Thu Fri Sat].each do |day_name| %>
        <div><%= day_name %></div>
      <% end %>
    </div>

    <!-- Calendar grid -->
    <div class="grid grid-cols-7 text-center gap-1">
      <!-- Empty cells before the 1st -->
      <% @date.beginning_of_month.wday.times do %>
        <div></div>
      <% end %>

      <!-- Day cells -->
      <% (@date.beginning_of_month..@date.end_of_month).each do |day| %>
        <% completed = @completions.include?(day) %>
        <% if completed %>
          <% completion = @rootein.completions.find_by(completed_on: day) %>
          <%= button_to rootein_completion_path(@rootein, completion),
              method: :delete,
              class: "p-2 rounded-lg text-sm w-full bg-green-500 text-white font-bold hover:bg-green-600 cursor-pointer" do %>
            <%= day.day %>
          <% end %>
        <% else %>
          <%= button_to rootein_completions_path(@rootein),
              params: { completed_on: day },
              class: "p-2 rounded-lg text-sm w-full bg-gray-100 hover:bg-gray-200 cursor-pointer" do %>
            <%= day.day %>
          <% end %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
